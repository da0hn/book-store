"use strict";(self.webpackChunkbook_store=self.webpackChunkbook_store||[]).push([[796],{4796:(H,f,i)=>{i.r(f),i.d(f,{CategoriesModule:()=>Q});var h=i(9808),m=i(4521),u=i(5861),t=i(5e3),x=i(5452),p=i(5310),g=i(7423),l=i(4999);function M(o,r){1&o&&(t.TgZ(0,"th",15),t._uU(1,"ID"),t.qZA())}function L(o,r){if(1&o&&(t.TgZ(0,"td",16),t._uU(1),t.qZA()),2&o){const e=r.$implicit;t.xp6(1),t.hij(" ",e.id," ")}}function N(o,r){1&o&&(t.TgZ(0,"th",15),t._uU(1,"NOME"),t.qZA())}function k(o,r){if(1&o&&(t.TgZ(0,"td",16),t._uU(1),t.qZA()),2&o){const e=r.$implicit;t.xp6(1),t.hij(" ",e.name," ")}}function U(o,r){1&o&&(t.TgZ(0,"th",15),t._uU(1,"DESCRI\xc7\xc3O"),t.qZA())}function D(o,r){if(1&o&&(t.TgZ(0,"td",16),t._uU(1),t.qZA()),2&o){const e=r.$implicit;t.xp6(1),t.hij(" ",e.description," ")}}function w(o,r){1&o&&(t.TgZ(0,"th",15),t._uU(1,"LIVROS"),t.qZA())}function Y(o,r){if(1&o){const e=t.EpF();t.TgZ(0,"td",16)(1,"a",17),t.NdJ("click",function(){const c=t.CHM(e).$implicit;return t.oxw().routeToBooks(c)}),t.TgZ(2,"i",18),t._uU(3,"book"),t.qZA()()()}}function E(o,r){1&o&&(t.TgZ(0,"th",19),t._uU(1,"A\xc7\xd5ES"),t.qZA())}const F=function(o){return[o,"edit"]},O=function(o){return[o,"delete"]};function J(o,r){if(1&o&&(t.TgZ(0,"td",16)(1,"a",20)(2,"i",18),t._uU(3,"edit"),t.qZA()(),t.TgZ(4,"a",21)(5,"i",18),t._uU(6,"delete"),t.qZA()()()),2&o){const e=r.$implicit;t.xp6(1),t.Q6J("routerLink",t.VKq(2,F,e.id)),t.xp6(3),t.Q6J("routerLink",t.VKq(4,O,e.id))}}function q(o,r){1&o&&t._UZ(0,"tr",22)}function I(o,r){1&o&&t._UZ(0,"tr",23)}let R=(()=>{class o{constructor(e,n,a,c){this.currentCategoryName=e,this.service=n,this.router=a,this.route=c,this.displayedColumns=["id","name","description","books","actions"],this.categories=[]}ngOnInit(){this.findAll()}findAll(){this.service.findAll().subscribe(e=>{this.categories=e})}routeToBooks(e){var n=this;return(0,u.Z)(function*(){n.currentCategoryName.emit({name:e.name}),yield n.router.navigate([e.id,"books"],{relativeTo:n.route})})()}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(x.A),t.Y36(p.H),t.Y36(m.F0),t.Y36(m.gz))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-categoria-list"]],decls:25,vars:3,consts:[[1,"content"],[1,"title"],["color","primary","mat-stroked-button","","routerLink","new",1,"mat-elevation-z4"],[1,"mat-elevation-z8","table-content"],["mat-table","",1,"table",3,"dataSource"],["matColumnDef","id"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","name"],["matColumnDef","description"],["matColumnDef","books"],["matColumnDef","actions"],["class","action-header","mat-header-cell","",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell",""],[1,"row-book",3,"click"],[1,"material-icons"],["mat-header-cell","",1,"action-header"],[1,"row-edit",3,"routerLink"],[1,"row-delete",3,"routerLink"],["mat-header-row",""],["mat-row",""]],template:function(e,n){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"h1"),t._uU(3,"Categorias"),t.qZA()(),t.TgZ(4,"button",2),t._uU(5,"+ NOVA CATEGORIA"),t.qZA(),t.TgZ(6,"div",3)(7,"table",4),t.ynx(8,5),t.YNc(9,M,2,0,"th",6),t.YNc(10,L,2,1,"td",7),t.BQk(),t.ynx(11,8),t.YNc(12,N,2,0,"th",6),t.YNc(13,k,2,1,"td",7),t.BQk(),t.ynx(14,9),t.YNc(15,U,2,0,"th",6),t.YNc(16,D,2,1,"td",7),t.BQk(),t.ynx(17,10),t.YNc(18,w,2,0,"th",6),t.YNc(19,Y,4,0,"td",7),t.BQk(),t.ynx(20,11),t.YNc(21,E,2,0,"th",12),t.YNc(22,J,7,6,"td",7),t.BQk(),t.YNc(23,q,1,0,"tr",13),t.YNc(24,I,1,0,"tr",14),t.qZA()()()),2&e&&(t.xp6(7),t.Q6J("dataSource",n.categories),t.xp6(16),t.Q6J("matHeaderRowDef",n.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",n.displayedColumns))},directives:[g.lW,m.rH,l.BZ,l.w1,l.fO,l.ge,l.Dz,l.ev,m.yS,l.as,l.XQ,l.nj,l.Gk],styles:[".content[_ngcontent-%COMP%]{width:90%;margin:1.4rem auto auto}.title[_ngcontent-%COMP%]{text-align:center;margin-bottom:3rem}.title[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2rem;color:#9b9898;font-weight:500}button[_ngcontent-%COMP%]{margin-bottom:.8rem}.row-delete[_ngcontent-%COMP%]{color:#ef5117;margin-left:.25rem}.row-edit[_ngcontent-%COMP%]{color:#eab437}.row-book[_ngcontent-%COMP%]{margin-left:.3rem;color:#0ff}.action-header[_ngcontent-%COMP%]{width:4.5rem}.table[_ngcontent-%COMP%]{width:100%}"]}),o})();var s=i(3075),y=i(4004),_=i(8505),v=i(3900),Z=i(2518),d=i(4106),C=i(7531);let b,T=(()=>{class o{constructor(e,n,a,c,A){this.service=e,this.snackbarService=n,this.formBuilder=a,this.router=c,this.route=A}ngOnInit(){this.setCurrentAction(),this.initForm(),this.loadCategory()}create(e){var n=this;this.service.create(e).subscribe(function(){var a=(0,u.Z)(function*(c){n.snackbarService.message({message:"Categoria criada com sucesso!"}),yield n.router.navigate(["categories"])});return function(c){return a.apply(this,arguments)}}())}initForm(){this.categoryForm=this.formBuilder.group({name:[null,[s.kI.required]],description:[null,[s.kI.required]]})}submitForm(){const e=Object.assign({},this.categoryForm.value);"new"===this.currentAction?this.create(e):this.update(Object.assign({id:this.idCategory},e))}setCurrentAction(){this.currentAction="new"===this.route.snapshot.url[0].path?"new":"edit"}loadCategory(){"edit"===this.currentAction?this.route.paramMap.pipe((0,y.U)(e=>+e.get("id")),(0,_.b)(e=>this.idCategory=e),(0,v.w)(e=>this.service.findById(e).pipe((0,_.b)(n=>this.pageTitle=`Editando categoria: ${n.name||""}`)))).subscribe(e=>this.categoryForm.patchValue(e)):this.pageTitle="Criando nova categoria"}update(e){var n=this;this.service.update(e).subscribe(function(){var a=(0,u.Z)(function*(c){n.snackbarService.message({message:"Categoria atualizada com sucesso"}),yield n.router.navigate(["categories"])});return function(c){return a.apply(this,arguments)}}())}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(p.H),t.Y36(Z.f),t.Y36(s.qu),t.Y36(m.F0),t.Y36(m.gz))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-category-new"]],decls:17,vars:2,consts:[[3,"formGroup","submit"],["appearance","outline",1,"form"],["formControlName","name","matInput","","name","name","placeholder","Ex. Computa\xe7\xe3o","type","text"],["formControlName","description","matInput","","name","description","placeholder","Ex. Livros de computa\xe7\xe3o","type","text"],[1,"buttons"],["color","warn","mat-stroked-button","","routerLink","/categories","type","button",1,"mat-elevation-z8"],["color","primary","mat-stroked-button","","type","submit",1,"mat-elevation-z8"]],template:function(e,n){1&e&&(t.TgZ(0,"form",0),t.NdJ("submit",function(){return n.submitForm()}),t.TgZ(1,"div")(2,"h1"),t._uU(3),t.qZA()(),t.TgZ(4,"mat-form-field",1)(5,"mat-label"),t._uU(6,"Nome"),t.qZA(),t._UZ(7,"input",2),t.qZA(),t.TgZ(8,"mat-form-field",1)(9,"mat-label"),t._uU(10,"Descri\xe7\xe3o"),t.qZA(),t._UZ(11,"textarea",3),t.qZA(),t.TgZ(12,"div",4)(13,"button",5),t._uU(14,"CANCELAR"),t.qZA(),t.TgZ(15,"button",6),t._uU(16,"CRIAR"),t.qZA()()()),2&e&&(t.Q6J("formGroup",n.categoryForm),t.xp6(3),t.Oqu(n.pageTitle))},directives:[s._Y,s.JL,s.sg,d.KE,d.hX,s.Fj,C.Nt,s.JJ,s.u,g.lW,m.rH],styles:[""]}),o})();function B(o,r){if(1&o){const e=t.EpF();t.TgZ(0,"form")(1,"div")(2,"h1"),t._uU(3),t.qZA()(),t.TgZ(4,"mat-form-field",1)(5,"mat-label"),t._uU(6,"Nome"),t.qZA(),t.TgZ(7,"input",2),t.NdJ("ngModelChange",function(a){return t.CHM(e),t.oxw().category.name=a}),t.qZA()(),t.TgZ(8,"mat-form-field",1)(9,"mat-label"),t._uU(10,"Descri\xe7\xe3o"),t.qZA(),t.TgZ(11,"textarea",3),t.NdJ("ngModelChange",function(a){return t.CHM(e),t.oxw().category.description=a}),t.qZA()(),t.TgZ(12,"div",4)(13,"button",5),t.NdJ("click",function(){return t.CHM(e),t.oxw().cancel()}),t._uU(14,"CANCELAR"),t.qZA(),t.TgZ(15,"button",6),t.NdJ("click",function(){return t.CHM(e),t.oxw().delete()}),t._uU(16,"DELETAR"),t.qZA()()()}if(2&o){const e=t.oxw();t.xp6(3),t.hij("Tem certeza que deseja deletar a categoria ",e.category.name,"?"),t.xp6(4),t.Q6J("ngModel",e.category.name)("disabled",!0),t.xp6(4),t.Q6J("ngModel",e.category.description)("disabled",!0)}}b=[{path:"",component:R},{path:"new",component:T},{path:":id/edit",component:T},{path:":id/delete",component:(()=>{class o{constructor(e,n,a,c){this.route=e,this.router=n,this.service=a,this.snackbarService=c}ngOnInit(){this.loadCategory()}loadCategory(){this.route.paramMap.pipe((0,y.U)(e=>+e.get("id")),(0,v.w)(e=>this.service.findById(e))).subscribe(e=>this.category=e)}delete(){var e=this;this.service.deleteById(this.category.id).subscribe(function(){var n=(0,u.Z)(function*(a){e.snackbarService.message({message:"Categoria deletada com sucesso"}),yield e.router.navigate(["categories"])});return function(a){return n.apply(this,arguments)}}())}cancel(){var e=this;return(0,u.Z)(function*(){yield e.router.navigate(["categories"])})()}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(m.gz),t.Y36(m.F0),t.Y36(p.H),t.Y36(Z.f))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-category-delete"]],decls:1,vars:1,consts:[[4,"ngIf"],["appearance","outline",1,"form"],["matInput","","name","name","type","text",3,"ngModel","disabled","ngModelChange"],["matInput","","name","description","type","text",3,"ngModel","disabled","ngModelChange"],[1,"buttons"],["color","warn","mat-stroked-button","","type","button",1,"mat-elevation-z8",3,"click"],["color","primary","mat-stroked-button","","type","submit",1,"mat-elevation-z8",3,"click"]],template:function(e,n){1&e&&t.YNc(0,B,17,5,"form",0),2&e&&t.Q6J("ngIf",n.category)},directives:[h.O5,s._Y,s.JL,s.F,d.KE,d.hX,C.Nt,s.Fj,s.JJ,s.On,g.lW],styles:[""]}),o})()}];let z=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[[m.Bz.forChild(b)],m.Bz]}),o})(),Q=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[[h.ez,z,l.p0,g.ot,s.u5,d.lN,C.c,s.UX]]}),o})()}}]);